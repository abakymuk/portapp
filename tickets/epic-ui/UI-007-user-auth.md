# UI-007 ¬∑ User Authentication (Clerk)

**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç  
**Milestone**: E  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π  
**EPIC**: UI - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Clerk - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

## –ó–∞–¥–∞—á–∏

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Clerk
- [ ] –°–æ–∑–¥–∞—Ç—å Clerk Application –≤ dashboard
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Clerk
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Clerk –≤ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SignIn –¥–ª—è –≤—Ö–æ–¥–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SignUp –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç UserButton –≤ header
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å Clerk
- [ ] –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è Clerk
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Clerk —Å Supabase –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] Clerk —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Clerk SignIn
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Clerk SignUp
- [ ] UserButton –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- [ ] –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å Clerk middleware
- [ ] –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Supabase
- [ ] Webhooks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Google, GitHub)
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Clerk

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Clerk
pnpm add @clerk/nextjs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm add @clerk/themes
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û–±–Ω–æ–≤–∏—Ç—å `.env.local`:

```env
# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_bW9kZXJuLWxhYnJhZG9yLTcwLmNsZXJrLmFjY291bnRzLmRldiQ
CLERK_SECRET_KEY=sk_test_5yQmuzKhpOcvvkCTorRrDitMIn91t6JvnbcpyHePPK
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Clerk –≤ Next.js

–û–±–Ω–æ–≤–∏—Ç—å `apps/web/src/app/layout.tsx`:

```typescript
import { ClerkProvider } from '@clerk/nextjs'
import { ruRU } from '@clerk/localizations'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <ClerkProvider localization={ruRU}>
      <html lang="ru">
        <body>
          {children}
        </body>
      </html>
    </ClerkProvider>
  )
}
```

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/app/sign-in/[[...sign-in]]/page.tsx`:

```typescript
import { SignIn } from '@clerk/nextjs'

export default function SignInPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-muted/50">
      <SignIn 
        appearance={{
          elements: {
            rootBox: "mx-auto",
            card: "shadow-none"
          }
        }}
      />
    </div>
  )
}
```

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/app/sign-up/[[...sign-up]]/page.tsx`:

```typescript
import { SignUp } from '@clerk/nextjs'

export default function SignUpPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-muted/50">
      <SignUp 
        appearance={{
          elements: {
            rootBox: "mx-auto",
            card: "shadow-none"
          }
        }}
      />
    </div>
  )
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç UserButton

–ó–∞–º–µ–Ω–∏—Ç—å `UserMenu` –Ω–∞ `UserButton` –≤ header:

```typescript
import { UserButton } from '@clerk/nextjs'

export function Header() {
  return (
    <header className="flex h-16 items-center gap-4 border-b bg-background px-4 lg:px-6">
      <SidebarToggle />
      <div className="flex-1" />
      <UserButton 
        appearance={{
          elements: {
            avatarBox: "h-8 w-8"
          }
        }}
      />
    </header>
  )
}
```

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/app/auth/register/page.tsx`:

```typescript
import { RegisterForm } from '@/components/auth/register-form'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import Link from 'next/link'
import { ArrowLeft } from 'lucide-react'

export default function RegisterPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-muted/50">
      <div className="w-full max-w-md space-y-6">
        <div className="text-center space-y-2">
          <Button asChild variant="ghost" size="sm">
            <Link href="/">
              <ArrowLeft className="h-4 w-4 mr-2" />
              –ù–∞–∑–∞–¥
            </Link>
          </Button>
          <h1 className="text-3xl font-bold">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
          <p className="text-muted-foreground">
            –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ PortOps
          </p>
        </div>

        <Card>
          <CardHeader>
            <CardTitle>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</CardTitle>
          </CardHeader>
          <CardContent>
            <RegisterForm />
          </CardContent>
        </Card>

        <div className="text-center">
          <p className="text-sm text-muted-foreground">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?{' '}
            <Link href="/auth/login" className="text-primary hover:underline">
              –í–æ–π—Ç–∏
            </Link>
          </p>
        </div>
      </div>
    </div>
  )
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç UserMenu

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/components/layout/user-menu.tsx`:

```typescript
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { Button } from '@/components/ui/button'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'
import { User, Settings, LogOut, Building } from 'lucide-react'
import { createClient } from '@/lib/supabase/browser'
import { useUser } from '@/hooks/use-user'

export function UserMenu() {
  const router = useRouter()
  const { user, profile } = useUser()
  const [loading, setLoading] = useState(false)

  const handleSignOut = async () => {
    setLoading(true)
    try {
      const supabase = createClient()
      await supabase.auth.signOut()
      router.push('/auth/login')
    } catch (error) {
      console.error('Error signing out:', error)
    } finally {
      setLoading(false)
    }
  }

  if (!user) {
    return (
      <Button asChild variant="outline">
        <Link href="/auth/login">–í–æ–π—Ç–∏</Link>
      </Button>
    )
  }

  const initials = profile?.first_name && profile?.last_name
    ? `${profile.first_name[0]}${profile.last_name[0]}`
    : user.email?.[0]?.toUpperCase() || 'U'

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" className="relative h-8 w-8 rounded-full">
          <Avatar className="h-8 w-8">
            <AvatarImage src={profile?.avatar_url} alt={user.email || ''} />
            <AvatarFallback>{initials}</AvatarFallback>
          </Avatar>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent className="w-56" align="end" forceMount>
        <DropdownMenuLabel className="font-normal">
          <div className="flex flex-col space-y-1">
            <p className="text-sm font-medium leading-none">
              {profile?.first_name && profile?.last_name
                ? `${profile.first_name} ${profile.last_name}`
                : user.email}
            </p>
            <p className="text-xs leading-none text-muted-foreground">
              {user.email}
            </p>
          </div>
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuItem asChild>
          <Link href="/profile">
            <User className="mr-2 h-4 w-4" />
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
          </Link>
        </DropdownMenuItem>
        <DropdownMenuItem asChild>
          <Link href="/organizations">
            <Building className="mr-2 h-4 w-4" />
            <span>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</span>
          </Link>
        </DropdownMenuItem>
        <DropdownMenuItem asChild>
          <Link href="/settings">
            <Settings className="mr-2 h-4 w-4" />
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
          </Link>
        </DropdownMenuItem>
        <DropdownMenuSeparator />
        <DropdownMenuItem onClick={handleSignOut} disabled={loading}>
          <LogOut className="mr-2 h-4 w-4" />
          <span>–í—ã–π—Ç–∏</span>
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

### Middleware –¥–ª—è Clerk

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/middleware.ts`:

```typescript
import { authMiddleware } from "@clerk/nextjs";

export default authMiddleware({
  // –ü—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
  publicRoutes: [
    "/",
    "/sign-in",
    "/sign-up",
    "/api/webhooks/clerk",
    "/api/webhooks/supabase"
  ],
  
  // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
  ignoredRoutes: [
    "/api/webhooks/clerk",
    "/api/webhooks/supabase"
  ]
});

export const config = {
  matcher: ["/((?!.+\\.[\\w]+$|_next).*)", "/", "/(api|trpc)(.*)"],
};
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase

–°–æ–∑–¥–∞—Ç—å webhook –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

```typescript
// apps/web/src/app/api/webhooks/clerk/route.ts
import { Webhook } from 'svix'
import { headers } from 'next/headers'
import { WebhookEvent } from '@clerk/nextjs/server'
import { createClient } from '@/lib/supabase/server'

export async function POST(req: Request) {
  const WEBHOOK_SECRET = process.env.CLERK_WEBHOOK_SECRET

  if (!WEBHOOK_SECRET) {
    throw new Error('Please add CLERK_WEBHOOK_SECRET from Clerk Dashboard to .env')
  }

  // –ü–æ–ª—É—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
  const headerPayload = headers();
  const svix_id = headerPayload.get("svix-id");
  const svix_timestamp = headerPayload.get("svix-timestamp");
  const svix_signature = headerPayload.get("svix-signature");

  if (!svix_id || !svix_timestamp || !svix_signature) {
    return new Response('Error occured -- no svix headers', {
      status: 400
    })
  }

  // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
  const payload = await req.json()
  const body = JSON.stringify(payload);

  // –°–æ–∑–¥–∞–µ–º webhook
  const wh = new Webhook(WEBHOOK_SECRET);

  let evt: WebhookEvent

  try {
    evt = wh.verify(body, {
      "svix-id": svix_id,
      "svix-timestamp": svix_timestamp,
      "svix-signature": svix_signature,
    }) as WebhookEvent
  } catch (err) {
    console.error('Error verifying webhook:', err);
    return new Response('Error occured', {
      status: 400
    })
  }

  const supabase = await createClient()

  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è
  switch (evt.type) {
    case 'user.created':
      // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase
      await supabase
        .from('user_profiles')
        .insert({
          id: evt.data.id,
          first_name: evt.data.first_name,
          last_name: evt.data.last_name,
          avatar_url: evt.data.image_url,
        })
      break;
      
    case 'user.updated':
      // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      await supabase
        .from('user_profiles')
        .update({
          first_name: evt.data.first_name,
          last_name: evt.data.last_name,
          avatar_url: evt.data.image_url,
        })
        .eq('id', evt.data.id)
      break;
      
    case 'user.deleted':
      // –£–¥–∞–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      await supabase
        .from('user_profiles')
        .delete()
        .eq('id', evt.data.id)
      break;
  }

  return new Response('', { status: 200 })
}
```

### –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Clerk

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `apps/web/src/hooks/use-clerk-user.ts`:

```typescript
'use client'

import { useUser } from '@clerk/nextjs'
import { useEffect, useState } from 'react'
import { createClient } from '@/lib/supabase/browser'

interface UserProfile {
  id: string
  first_name: string | null
  last_name: string | null
  phone: string | null
  position: string | null
  avatar_url: string | null
  timezone: string
  language: string
  is_active: boolean
  last_login_at: string | null
}

export function useClerkUser() {
  const { user, isLoaded } = useUser()
  const [profile, setProfile] = useState<UserProfile | null>(null)
  const [loading, setLoading] = useState(true)
  const supabase = createClient()

  useEffect(() => {
    if (!isLoaded) return

    if (user) {
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ Supabase
      const loadProfile = async () => {
        const { data: profileData } = await supabase
          .from('user_profiles')
          .select('*')
          .eq('id', user.id)
          .single()
        
        setProfile(profileData)
        setLoading(false)
      }

      loadProfile()
    } else {
      setProfile(null)
      setLoading(false)
    }
  }, [user, isLoaded, supabase])

  return { user, profile, loading, isLoaded }
}
```

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Clerk
cd apps/web
pnpm add @clerk/nextjs @clerk/themes svix

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdir -p src/app/sign-in/\[\[...sign-in\]\]
mkdir -p src/app/sign-up/\[\[...sign-up\]\]
mkdir -p src/app/api/webhooks/clerk
mkdir -p src/hooks

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
touch src/app/sign-in/\[\[...sign-in\]\]/page.tsx
touch src/app/sign-up/\[\[...sign-up\]\]/page.tsx
touch src/app/api/webhooks/clerk/route.ts
touch src/hooks/use-clerk-user.ts
touch src/middleware.ts

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Clerk Dashboard
# 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ https://dashboard.clerk.com
# 2. –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ .env.local
# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Supabase
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```typescript
// –¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const testLogin = async () => {
  const supabase = createClient()
  const { data, error } = await supabase.auth.signInWithPassword({
    email: 'test@example.com',
    password: 'password123'
  })
  console.log('Login result:', { data, error })
}
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **DB-005** - Users schema (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω)
- **UI-006** - Sidebar (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω)
- **Clerk Dashboard** - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## –°–ª–µ–¥—É—é—â–∏–µ —Ç–∏–∫–µ—Ç—ã

- **UI-008** - User profile management
- **UI-009** - Organization management

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Clerk –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å Supabase
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Google, GitHub)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Clerk Dashboard –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Clerk middleware

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å Supabase Auth –Ω–∞ Clerk
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Clerk Dashboard
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Clerk —Å Next.js
- –°–æ–∑–¥–∞–Ω–∏–µ webhooks –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### üîÑ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ó–∞–º–µ–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ñ–æ—Ä–º –Ω–∞ Clerk –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Clerk
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UserButton –≤–º–µ—Å—Ç–æ UserMenu
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
