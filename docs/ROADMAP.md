# Roadmap PortOps MVP

## –û–±—â–µ–µ –≤–∏–¥–µ–Ω–∏–µ

PortOps MVP ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:

1. **Ingest ‚Üí Normalize ‚Üí Store ‚Üí Expose ‚Üí UI** –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π —Ä–µ–π—Å–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. **Dashboard**: –±–ª–∏–∂–∞–π—à–∏–µ –ø—Ä–∏—Ö–æ–¥—ã, KPI, dwell, at-risk –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
3. **Orders**: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫, bulk paste –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤/BOL, —Å—Ç–∞—Ç—É—Å—ã, –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Supabase**: Postgres + RLS, Edge Functions (Deno), Storage, Cron
- **Next.js 15**: App Router, Server Components, Server Actions, Route Handlers
- **UI**: Tailwind + shadcn/ui, charts (uPlot/Chart.js)
- **Observability**: Supabase logs + –ø—Ä–æ—Å—Ç—ã–µ ingest-–º–µ—Ç—Ä–∏–∫–∏

## Milestones

### Milestone A ‚Äî –°—Ä–µ–¥–∞ –∏ —Å–∫–µ–ª–µ—Ç—ã
**–°—Ç–∞—Ç—É—Å**: üöß –í —Ä–∞–±–æ—Ç–µ

- [ ] A1. Dev prerequisites —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (Node/pnpm/Docker/Supabase CLI/Vercel CLI)
- [ ] A2. –ú–æ–Ω–æ—Ä–µ–ø–æ + Next 15 app + Tailwind + shadcn/ui
- [ ] A3. Supabase –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—â–µ–Ω; –ø—Ä–æ–µ–∫—Ç —Å–≤—è–∑–∞–Ω —Å –æ–±–ª–∞–∫–æ–º
- [ ] A4. ENV –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∫–ª—é—á–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã

**Definition of Done**: –ª–æ–∫–∞–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Dashboard —Å —Å–∏–¥-–¥–∞–Ω–Ω—ã–º–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ingest dry-run

### Milestone B ‚Äî –ë–∞–∑–∞ –∏ RLS
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] B1. –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã Core, Raw/Stg, —Å–æ–±—ã—Ç–∏—è, –∏–Ω–¥–µ–∫—Å—ã
- [ ] B2. –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤—å—é—Ö–∏ + RPC –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] B3. RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ orders/order_items
- [ ] B4. –°–∏–¥-–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

**Definition of Done**: —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã, RLS —Ä–∞–±–æ—Ç–∞–µ—Ç, Dashboard –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

### Milestone C ‚Äî Ingest/Normalize
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] C1. Edge Function ingest-arrivals (–ø—Ä–∏—ë–º CSV/JSON, dry‚Äërun, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] C2. Cron puller puller-sourceX (–¥–µ–º–æ-–∏—Å—Ç–æ—á–Ω–∏–∫)
- [ ] C3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ stg_* + idempotent upsert ‚Üí core
- [ ] C4. –ú–µ—Ç—Ä–∏–∫–∏/–æ—à–∏–±–∫–∏ –∏–Ω–∂–µ—Å—Ç–∞ –ø–∏—à—É—Ç—Å—è

**Definition of Done**: ingest –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç core –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### Milestone D ‚Äî UI Expose
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] D1. Dashboard: KPI + mv_upcoming_voyages + Dwell chart
- [ ] D2. Arrivals list + —Ñ–∏–ª—å—Ç—Ä—ã + –¥–µ—Ç–∞–ª–∏ —Ä–µ–π—Å–∞
- [ ] D3. Containers –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É/BOL

**Definition of Done**: –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, —Ñ–∏–ª—å—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç

### Milestone E ‚Äî Orders
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] E1. Server Actions: createOrder/addOrderItems (bulk paste)
- [ ] E2. Orders list/detail, —Ç–∞–π–º–ª–∞–π–Ω —Å–æ–±—ã—Ç–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- [ ] E3. –¢—Ä–∏–≥–≥–µ—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç

**Definition of Done**: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, bulk –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### Milestone F ‚Äî Ops & Cron
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] F1. Vercel Cron ‚Üí /api/cron/refresh (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ MV)
- [ ] F2. –ê–ª–µ—Ä—Ç—ã ¬´–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö N —á–∞—Å–æ–≤¬ª (–ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ UI)

**Definition of Done**: MV –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤–µ–∂–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### Milestone G ‚Äî –ü–æ–ª–∏—Ä–æ–≤–∫–∞
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç

- [ ] G1. Audit log (–º–∏–Ω–∏–º—É–º) –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
- [ ] G2. Server-side pagination –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- [ ] G3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —Å–∫—Ä–∏–Ω–∫–∞—Å—Ç—ã, –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

**Definition of Done**: MVP –≥–æ—Ç–æ–≤ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏, –µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ MVP

- [ ] Dashboard: KPI/Upcoming/Dwell –æ—Ç—Ä–∞–∂–∞—é—Ç —Å–∏–¥-–¥–∞–Ω–Ω—ã–µ
- [ ] Arrivals/Details: —Ñ–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≥—Ä—É–∑—è—Ç—Å—è –±—ã—Å—Ç—Ä–æ (<200ms DB, <1s TTFB)
- [ ] Orders: —Å–æ–∑–¥–∞–Ω–∏–µ, bulk paste, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ —Å–æ–±—ã—Ç–∏—è–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- [ ] Ingest: CSV –∏ JSON –æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç, –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ—Ç
- [ ] RLS: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö org –Ω–µ –≤–∏–¥—è—Ç —á—É–∂–∏–µ –∑–∞–∫–∞–∑—ã
- [ ] Cron: MV —Ä–µ—Ñ—Ä–µ—à–∞—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] Secrets –Ω–µ —É—Ç–µ–∫–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –±–∞–Ω–¥–ª

## Post-MVP –∏–¥–µ–∏

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ (holds, appointments), –≤–µ–±—Ö—É–∫–∏
- –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è/–ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∞–ª–µ—Ä—Ç—ã per‚Äëorg
- MapLibre GL –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—É–¥–æ–≤/—Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ container_events –ø–æ –º–µ—Å—è—Ü–∞–º –ø—Ä–∏ —Ä–æ—Å—Ç–µ
